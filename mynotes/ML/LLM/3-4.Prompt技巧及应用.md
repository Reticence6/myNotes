**把大模型当人看**

# Prompt技巧

## Prompt规范

通常由任务说明、上下文、问题、输出格式这几个部分中的一个或多个组成

1. 任务说明
   - 需要清晰、具体的任务说明
   - 明确的动词、具体的名词、简洁明了
2. 上下文
   - 上下文丰富且清晰
   - 上下文可以是与问题直接相关的背景信息、具体的演示实例、对话历史等
   - 清晰体现在上下文信息必须与问题紧密相关，避免包含冗余或不必要的信息
3. 输出
   - 输出格式要规范
   - 明确输出格式，使模型输出结构化
   - 常用格式包括JSON、XML、HTML、Markdown、CSV等，也可以提供具体示例
4. 排版
   - 清晰的排版有助于避免歧义
   - 技巧：使用一致的分隔符、合理使用空白和缩进、清晰的标题和子标题

## 合理归纳提问

- 提问的质量直接影响到信息触达的效率和深度
- 可以利用“合理归纳提问”来提升交互的质量
- 利用“复杂问题拆解”和“追问”两个高级提问策略，引导大模型
  - 复杂问题拆解：把复杂问题分解为更小、更易于理解的子问题，并引导模型逐一回答，随后将子问题的答案汇总，形成最终的回答
  - 善用追问：深入追问（深入挖掘）、扩展追问（拓展广度）、反馈追问（质疑并请求更正）
  - 适时使用CoT
    - 需要考虑任务类别（复杂推理问题适合用）、模型规模（应用于巨型模型时性能提升显著）、模型能力（未经推理指令微调的模型更适合用）
    - 根据不同任务，选择不同的CoT形式
      - 逻辑推理和逐步分析时可以使用按部就班模式
      - 创意思维任务可以选用三思后行模式
      - 高准确度和高可靠性任务时可以使用集思广益模式
  - 善用心理暗示：给大模型积极的心理暗示
    - 角色扮演：设定一个相近的角色，角色需包含具体属性、职责、知识和技能
    - 情景代入：将模型至于特定的情景或环境中，将专业知识、历史背景等信息嵌入到模型的响应中

## Prompt长度压缩问题

- 越长的prompt会导致模型的推理速度减慢和推理成本上升
- 如：LLMLingua：利用充分训练的小模型，迭代地检测并提出Prompt中的非必要Token，早确保模型性能不受影响的前提下，尽可能压缩Prompt长度

# Prompt工程应用

## 自然语言接口

- 利用精心设计的Prompt引导大模型，实现自然语言接口
- Text-to-SQL
  - 将自然语言问题转化为相应的结构化查询语句
  - C3：清晰提示、校准偏差、一致性校准
- 代码生成
  - 自然语言描述转化为程序代码
  - AlphaCodium：利用Prompt工程构建Prompt，引导大模型生成解决方案和测试用例，再迭代生成和测试代码，以获取最接近正确的代码、

## 数据合成

- 利用大模型合成高质量数据
- Self-Instruct
  - 构造任务池、指令生成、指令分类、数据生成、数据过滤
- Evol-Instruct
  - 对生成的数据再进行深度演化、广度演化、淘汰演化

## 搜索引擎

- 提供更个性化和精准的搜索结果
- Microsoft Copilot

## 智能体

- 依靠Prompt驱动大模型作为智能体的大脑
- 智能体：
  - 能够自主感知环境并采取行动以实现特定目标的实体
  - 通常由大语言模型基底和四大模块组成
    - 大模型：大脑，控制智能体完成规划、 决策、行动等操作
    - 配置模块：定义智能体的角色（利用Prompt）
    - 记忆模块：智能体的知识与交互记忆的存储中心
    - 计划模块：任务规划器（如用CoT技术）
    - 行动模块：借助外部工具完成任务（Prompt调用工具）
  - 单智能体
    - 仅包含一个智能体，交互相对简单，适用于简单的任务
    - Prompt设计主要用于引导模型执行特定任务，且主要围绕单个上下文
    - GPT Researcher：专门用于科研任务，能生成详尽、精确的研究报告
    - HuggingGPT：完成目标任务，工作流程包含：任务规划、模型选择、任务执行、相应生产
  - 多智能体
    - 包含多个智能体，每个智能体有设定的角色和任务，交互复杂度高。它们之间协调、合作甚至竞争，以实现共同或各自的目标
    - Prompt除了用于引导模型执行任务，还用于智能体之间的信息传递，且存在多个上下文
    - MetaGPT：软件开发团队
    - 斯坦福小镇：利用多个智能体模拟逼真人类行为以及群体社会行为的虚拟环境
- 大模型驱动的具身智能
  - 大语言模型是AGI的重要基石与智慧引擎，机器人是大模型走向真实世界的物理载体
  - VoxPoser：机械臂，利用大模型，不需要额外的数据训练，就能将复杂的指令转化为具体的行动的计划（自然语言转化为代码）
  - Alter3：GPT-4驱动的人形机器人，可以依据指令，自发进行行动（自然语言生成动作代码，还会根据人类反馈重写代码，并有记忆训练动作）